{"version":3,"sources":["utils.ts","logo.svg","AddToHomescreen.tsx","App.js","reportWebVitals.js","index.js"],"names":["BrowserName","window","deferredInstallPrompt","addEventListener","event","alert","Utils","print","preventDefault","value","undefined","navigator","standalone","matchMedia","matches","verbose","nativeInstallPrompt","this","getNativeInstallPrompt","isValueMissing","prompt","userChoice","outcome","Boolean","chrome","userAgentData","brands","some","b","brand","test","userAgent","vendor","Edge","opr","Opera","SamsungInternet","isChromium","Chrome","Vivaldi","Yandex","Firefox","Safari","InternetExplorer","Unknown","str","values","replace","match","group1","String","depth","constructor","name","format","map","v","join","valuesString","Array","from","document","entriesString","Object","keys","k","AddToHomescreen","defaultData","getShouldShowAdvert","getAdvert","getGuidancePrompt","forceShowAdvert","_data","useMemo","__data","localStorage","getItem","_parsed_data","JSON","parse","version","error","shouldIncrementPageVisits","useState","pageVisits","data","setData","shouldShowAdvert","setShouldShowAdvert","useEffect","console","log","setItem","stringify","useAddToHomeScreenData","nativePrompt","setNativePrompt","guidancePromptCloseCallback","useCallback","setShouldShowGuidancePrompt","guidancePrompt","canShowPrompt","setCanShowPrompt","setTimeout","newNativePrompt","canShowNativePrompt","canShowGuidancePrompt","newCanShowPrompt","isDesktop","isAppInstalled","shouldShowGuidancePrompt","advertYesCallback","asyncCallback","a","showNativeInstallPromptIfExists","dismissCount","advertNoCallback","App","flags","isAndroid","isIos","isIpad","isIphone","isSamsung","flagsSet","Set","entries","filter","flag","className","src","logo","alt","getBrowserName","style","display","gap","Button","variant","color","onClick","location","href","removeItem","onYes","onNo","boxSizing","position","bottom","width","justifyContent","padding","background","alignItems","IconButton","onClose","Dialog","open","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.3e2990aa.chunk.js","sourcesContent":["export type BeforeInstallEventPromptOutcome = \"accepted\"|\"dismissed\";\nexport type BeforeInstallEventPrompt = {\n    prompt: () => void,\n    userChoice: Promise<{ outcome: BeforeInstallEventPromptOutcome }>;\n}\n\ndeclare global {\n    interface Window {\n        chrome: any | undefined,\n        opr: any | undefined,\n        deferredInstallPrompt: BeforeInstallEventPrompt|null|undefined,\n        isAppInstalled: boolean,\n    }\n    interface Navigator {\n        userAgentData: { brands: { brand: string }[] } | undefined,\n        standalone: any,\n    }\n}\n\nwindow.deferredInstallPrompt = null;\n\nwindow.addEventListener(\"beforeinstallprompt\", (event) => {\n  alert(`beforeinstallprompt ${Utils.print(event)}`);\n  event.preventDefault();\n  // @ts-ignore\n  window.deferredInstallPrompt = event;\n});\n\nexport enum BrowserName {\n    Edge = \"Edge\",\n    Opera = \"Opera\",\n    SamsungInternet = \"Samsung Internet\",\n    Chrome = \"Chrome\",\n    Vivaldi = \"Vivaldi\",\n    Yandex = \"Yandex\",\n    Firefox = \"Firefox\",\n    Safari = \"Safari\",\n    InternetExplorer = \"Internet Explorer\",\n    Unknown = \"Unknown\",\n}\n\nclass Utils {\n    public static isValueMissing(value: any): boolean {\n        return (value === undefined) || (value === null);\n    }\n\n    // Add to homescreen\n    public static isAppInstalled() {\n        // iOS\n        if (window.navigator.standalone) return true;\n        // Android\n        if (window.matchMedia('(display-mode: standalone)').matches) return true;\n        return false;\n    }\n    public static getNativeInstallPrompt() {\n        return window.deferredInstallPrompt;\n    }\n    public static async showNativeInstallPromptIfExists(verbose: boolean = false) {\n        const nativeInstallPrompt = this.getNativeInstallPrompt();\n        alert(`Install prompt: ${Utils.print(nativeInstallPrompt)}`);\n        if (this.isValueMissing(nativeInstallPrompt)) return;\n        nativeInstallPrompt!.prompt();\n        const { outcome } = await nativeInstallPrompt!.userChoice;\n        if (verbose) alert(`Install outcome: ${Utils.print(outcome)}`);\n        window.deferredInstallPrompt = null;\n        return outcome;\n    }\n\n    public static isDesktop(): boolean {\n        return window.matchMedia(\"(hover: hover) and (pointer: fine)\").matches;\n    }\n    public static isChromium(): boolean {\n        return Boolean(window.chrome || (navigator.userAgentData?.brands ?? []).some(b => b.brand === \"Google Chrome\"));\n    }\n    public static isIos(): boolean {\n        return Boolean(/iPad|iPhone|iPod/i.test(window.navigator.userAgent));\n    }\n    public static isIpad(): boolean {\n        return Boolean(/iPad/i.test(window.navigator.userAgent));\n    }\n    public static isIphone(): boolean {\n        return Boolean(/iPhone|iPod/i.test(window.navigator.userAgent));\n    }\n    public static isAndroid(): boolean {\n        return Boolean(/Android/i.test(window.navigator.userAgent));\n    }\n    public static isSamsung(): boolean {\n        return Boolean(/SAMSUNG|Samsung|SGH-[I|N|T]|GT-[I|N]|SM-[A|N|P|T|Z]|SHV-E|SCH-[I|J|R|S]|SPH-L/i.test(window.navigator.userAgent));\n    }\n    public static getBrowserName(): BrowserName {\n        const userAgent = window.navigator.userAgent;\n        const vendor = window.navigator.vendor;\n        switch (true) {\n            case /Edge|Edg|EdgiOS/i.test(userAgent):\n                return BrowserName.Edge;\n            case /OPR|Opera/i.test(userAgent) && Boolean(window.opr):\n                return BrowserName.Opera;\n            case /SamsungBrowser/i.test(userAgent):\n                return BrowserName.SamsungInternet;\n            case /CriOS/i.test(userAgent):\n            case /Chrome/i.test(userAgent) && vendor === \"Google Inc.\" && this.isChromium():\n                return BrowserName.Chrome;\n            case /Vivaldi/i.test(userAgent):\n                return BrowserName.Vivaldi;\n            case /YaBrowser/i.test(userAgent):\n                return BrowserName.Yandex;\n            case /Firefox|FxiOS/i.test(userAgent):\n                return BrowserName.Firefox;\n            case /Safari/i.test(userAgent):\n                return BrowserName.Safari;\n            case /MSIE|Trident|IEMobile|WPDesktop/i.test(userAgent):\n                return BrowserName.InternetExplorer;\n            default:\n                return BrowserName.Unknown;\n        }\n    }\n\n    // formatting\n    public static format(str: string, values: any[]): string {\n        return str.replace(/%(\\d+)/g, (match: string, group1: string) => {\n            return String(values?.[+group1] ?? \"\");\n        });\n    }\n    public static print(value: any, depth = 1): string {\n        if (depth >= 3) return \"\";\n        switch (value?.constructor?.name) {\n            case \"String\":\n                return this.format(\"\\\"%0\\\"\", [value]);\n            case \"Number\":\n            case \"boolean\":\n            case undefined:\n                return String(value);\n            case \"Array\":\n                return this.format(\"[%0]\", [value.map((v: any) => this.print(v, depth+1)).join(\", \")]);\n            case \"Set\":\n                const valuesString = Array.from(value as Set<any>).map(v => this.print(v, depth+1)).join(\", \");\n                return this.format(\"{%0}\", [valuesString]);\n            default:\n                if (value === window || value === document) return \"\";\n                const entriesString = Object.keys(value).map((k) => this.format(\"%0: %1\", [this.print(k, depth+1), this.print(value[k], depth+1)])).join(\", \")\n                return this.format(\"{%0}\", [entriesString]);\n        }\n    }\n}\nexport default Utils;\n","export default __webpack_public_path__ + \"static/media/logo.6ce24c58.svg\";","import { useCallback, useEffect, useMemo, useState } from \"react\";\nimport Utils, { BeforeInstallEventPrompt, BeforeInstallEventPromptOutcome } from \"./utils\";\n\ntype AddToHomescreenData = {\n    pageVisits: number,\n    dismissCount: number,\n    version: number,\n}\nfunction useAddToHomeScreenData(\n    defaultData: AddToHomescreenData,\n    getShouldShowAdvert: (data: AddToHomescreenData) => boolean,\n): [AddToHomescreenData, (data: AddToHomescreenData) => void, boolean] {\n    const _data = useMemo<AddToHomescreenData>(() => {\n        const __data = localStorage.getItem(\"AddToHomeScreen\");\n        if (Utils.isValueMissing(__data)) return defaultData;\n        try {\n            const _parsed_data = JSON.parse(__data!);\n            if (_parsed_data.version !== defaultData.version) return defaultData;\n            return { ...defaultData, ..._parsed_data };\n        } catch (error) {\n            return defaultData;\n        }\n    // eslint-disable-next-line\n    }, []);\n    const shouldIncrementPageVisits = !getShouldShowAdvert(_data);\n    const [data, setData] = useState({ ..._data, pageVisits: _data.pageVisits + (shouldIncrementPageVisits ? 1 : 0) });\n    const [shouldShowAdvert, setShouldShowAdvert] = useState(false);\n    useEffect(() => {\n        console.log(\"AddToHomeScreen\", data);\n        alert(`AddToHomeScreenData: ${Utils.print(data)}`);\n        localStorage.setItem(\"AddToHomeScreen\", JSON.stringify(data));\n        setShouldShowAdvert(getShouldShowAdvert(data))\n    }, [data, getShouldShowAdvert]);\n    return [data, setData, shouldShowAdvert];\n}\n\ntype Props = {\n    defaultData: AddToHomescreenData,\n    maxDismissCount?: number,\n    getShouldShowAdvert: (data: AddToHomescreenData) => boolean,\n    getGuidancePrompt: (closeCallback: () => void) => JSX.Element|undefined|null,\n    getAdvert: (yesCallback: () => void, noCallback: () => void) => JSX.Element,\n    forceShowAdvert?: boolean,\n}\nexport const AddToHomescreen: React.FC<Props> = ({ defaultData, getShouldShowAdvert, getAdvert, getGuidancePrompt, forceShowAdvert = false }) => {\n    const [data, setData, shouldShowAdvert] = useAddToHomeScreenData(defaultData, getShouldShowAdvert);\n    // prompts\n    const [nativePrompt, setNativePrompt] = useState<BeforeInstallEventPrompt|null|undefined>(undefined);\n    const guidancePromptCloseCallback = useCallback(() => {\n        setShouldShowGuidancePrompt(false);\n    }, []);\n    const guidancePrompt = useMemo(() => getGuidancePrompt(guidancePromptCloseCallback), [getGuidancePrompt, guidancePromptCloseCallback]);\n    const [canShowPrompt, setCanShowPrompt] = useState(false);\n    useEffect(() => {\n        setTimeout(() => {\n            const newNativePrompt = Utils.getNativeInstallPrompt();\n            setNativePrompt(newNativePrompt);\n            const canShowNativePrompt = !Utils.isValueMissing(newNativePrompt);\n            const canShowGuidancePrompt = !Utils.isValueMissing(guidancePrompt);\n            const newCanShowPrompt = !Utils.isDesktop() && (canShowNativePrompt || canShowGuidancePrompt) && !Utils.isAppInstalled();\n            setCanShowPrompt(newCanShowPrompt);\n        }, 1000);\n    })\n    const [shouldShowGuidancePrompt, setShouldShowGuidancePrompt] = useState(false);\n    // advert\n    const advertYesCallback = useCallback(() => {\n        const asyncCallback = async () => {\n            let outcome: BeforeInstallEventPromptOutcome|undefined = undefined;\n            if (!Utils.isValueMissing(nativePrompt)) {\n                outcome = await Utils.showNativeInstallPromptIfExists();\n            } else {\n                setShouldShowGuidancePrompt(true);\n                outcome = \"dismissed\";\n            }\n            if (outcome === \"accepted\") {\n                setData({ ...data, dismissCount: data.dismissCount + 1 });\n            }\n        };\n        asyncCallback();\n    }, [data, setData, nativePrompt]);\n    const advertNoCallback = useCallback(() => {\n        setData({ ...data, dismissCount: data.dismissCount + 1 });\n    }, [data, setData]);\n\n    return <>\n        {((canShowPrompt && shouldShowAdvert) || forceShowAdvert) && getAdvert(advertYesCallback, advertNoCallback)}\n        {canShowPrompt && shouldShowGuidancePrompt && guidancePrompt}\n    </>;\n}\n","import logo from './logo.svg';\nimport './App.css';\nimport Utils, { BrowserName } from './utils';\nimport { AddToHomescreen } from './AddToHomescreen';\nimport { Button, Dialog, IconButton } from '@material-ui/core';\nimport AndroidIcon from '@material-ui/icons/Android';\nimport CloseIcon from '@material-ui/icons/Close';\n\nfunction App() {\n    const flags = {\n        isDesktop: Utils.isDesktop(),\n        isAndroid: Utils.isAndroid(),\n        isIos: Utils.isIos(),\n        isIpad: Utils.isIpad(),\n        isIphone: Utils.isIphone(),\n        isSamsung: Utils.isSamsung(),\n        isChromium: Utils.isChromium(),\n    }\n    const flagsSet = new Set(Object.entries(flags).filter(([flag, v]) => v).map(([flag, v]) => flag));\n    const VERSION = 11;\n    return (\n        <div className=\"App\">\n          <header className=\"App-header\">\n                <img src={logo} className=\"App-logo\" alt=\"logo\" />\n                <p>\n                    App version: {VERSION}, {Utils.getBrowserName()} {Utils.print(flagsSet)} <br />\n                    window.chrome: {Utils.print(Boolean(window.chrome))} <br />\n                    window.opr: {Utils.print(Boolean(window.opr))} <br />\n                    brands: {Utils.print((navigator.userAgentData?.brands ?? []).map(b => b.brand))} <br />\n                    vendor: {Utils.print(window.navigator.vendor)} <br />\n                    userAgent: {Utils.print(window.navigator.userAgent)} <br />\n                </p>\n                <div style={{ display: \"flex\", gap: 8 }}>\n                    <Button variant=\"contained\" color=\"primary\" onClick={async () => {\n                        Utils.showNativeInstallPromptIfExists(true);\n                    }}>Install</Button>\n                    <Button variant=\"contained\" color=\"primary\" onClick={() => {\n                        // eslint-disable-next-line\n                        window.location.href = window.location.href;\n                    }}>Reload page</Button>\n                    <Button variant=\"contained\" color=\"primary\" onClick={() => {\n                        localStorage.removeItem(\"AddToHomeScreen\");\n                    }}>Reset AddToHomeScreenData</Button>\n                </div>\n            </header>\n            <AddToHomescreen\n                defaultData={{ pageVisits: 0, dismissCount: 0, version: VERSION }}\n                getShouldShowAdvert={(data) => {\n                    if (data.dismissCount >= 20) return false;\n                    return data.pageVisits >= (3**(data.dismissCount + 1));\n                }}\n                getAdvert={(onYes, onNo) => {\n                    return <div style={{ boxSizing: \"border-box\", position: \"fixed\", bottom: 0, width: \"100%\", display: \"flex\", justifyContent: \"space-between\", padding: \"8px 4px 8px 20px\", background: \"#fff\" }}>\n                        <div style={{ display: \"flex\", alignItems: \"center\", gap: 8 }}>\n                            <AndroidIcon />\n                            <Button onClick={onYes}>PÅ™idat aplikaci pwa na plochu</Button>\n                        </div>\n                        <IconButton onClick={onNo}><CloseIcon /></IconButton>\n                    </div>;\n                }}\n                getGuidancePrompt={(onClose) => {\n                    if (Utils.isIos()) {\n                        // TODO: add ios guidance images\n                        return undefined;\n                    }\n                    const browserName = Utils.getBrowserName();\n                    switch (browserName) {\n                        case BrowserName.Firefox:\n                            return <Dialog open={true}>\n                                {/* TODO: add firefox guidance image */}\n                                Firefox guidance prompt\n                                <IconButton onClick={onClose}><CloseIcon /></IconButton>\n                            </Dialog>;\n                        case BrowserName.Opera:\n                            alert(\"Opera guidance\");\n                            return <Dialog open={true}>\n                                {/* TODO: add opera guidance image */}\n                                Opera guidance prompt\n                                <IconButton onClick={onClose}><CloseIcon /></IconButton>\n                            </Dialog>;\n                        default:\n                            return undefined;\n                    }\n                }}\n            />\n        </div>\n    );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}